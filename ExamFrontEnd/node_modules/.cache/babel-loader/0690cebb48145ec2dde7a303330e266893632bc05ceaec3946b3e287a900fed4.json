{"ast":null,"code":"import _regeneratorRuntime from \"D:/atos/Task/ExamFrontEnd/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/atos/Task/ExamFrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"D:/atos/Task/ExamFrontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"D:\\\\atos\\\\Task\\\\ExamFrontEnd\\\\src\\\\questions\\\\pages\\\\UserQuestion.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport QuestionList from '../components/QuestionList';\nimport { useParams } from 'react-router-dom';\nimport ErrorModel from '../../Model/ErorrModel';\nimport axios from \"axios\";\n\n// const DUMMY_QUESTIONS = [\n//   {\n//     id: 'p1',\n//     name: 'this is name for first question',\n//     category: 'this is category',\n//     subCategory: 'this is subcaegory',\n//     mark: 'this is the mark',\n//     expextedTime: \"\",\n//     correctAnswers: [1, 2, 3, 4],  //array of ids\n//     createdBy: \"u1\",\n//     createdAt: \"\",\n//     answers: [{\n//       id: 1,\n//       name: \"name of answer\",\n//       description: \"this is desc\"\n//     }, {\n//       id: 2,\n//       name: \"name of answer2\",\n//       description: \"this is desc2\"\n//     }],\n//   },\n//   {\n//     id: 'p2',\n//     name: 'Empire State Building',\n//     category: 'One of the most famous sky scrapers in the world!',\n//     subCategory: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/NYC_Empire_State_Building.jpg/640px-NYC_Empire_State_Building.jpg',\n//     mark: '20 W 34th St, New York, NY 10001',\n//     expextedTime: \"\",\n//     correctAnswers: [],\n//     createdBy: \"u2\",\n//     createdAt: \"\",\n//     answers: {\n//       id: 40.7484405,\n//       name: -73.9878584,\n//       description: \"\"\n//     },\n//   }\n// ];\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar UserQuestion = function UserQuestion() {\n  _s();\n  // const [error, setError] = useState();\n  var userId = useParams().userId;\n  // console.log(\"hello world\");\n\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    loadedQuestions = _useState2[0],\n    setLoadedQuestions = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isLoading = _useState6[0],\n    setIsLoading = _useState6[1];\n  useEffect(function () {\n    var sendReq = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res, resData;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.get(\"http://localhost:5000/api/questions/user/\".concat(userId));\n            case 4:\n              res = _context.sent;\n              _context.next = 7;\n              return res.data;\n            case 7:\n              resData = _context.sent;\n              if (!(res.status !== 200)) {\n                _context.next = 10;\n                break;\n              }\n              throw new Error(resData.message);\n            case 10:\n              setLoadedQuestions(resData.questions);\n              // console.log(loadedQuestions)\n\n              // console.log(res);\n              _context.next = 16;\n              break;\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](1);\n              setError(_context.t0.message);\n            case 16:\n              setIsLoading(false);\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 13]]);\n      }));\n      return function sendReq() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    sendReq();\n  }, [userId]);\n  var errorHandler = function errorHandler() {\n    setError(null);\n  };\n  // useEffect(() => {\n\n  //   const fetchQuestions = async () => {\n  //     try {\n  //       const responseData = await axios.get(\n  //         `http://localhost:5000/api/questions/user/${userId}`,\n  //       );\n  //       console.log(responseData);\n  //       setLoadedQuestions(responseData.questions);\n  //     } catch (err) {\n  //       // setError(err.message);\n  //     }\n  //   };\n  //   fetchQuestions();\n  //   //[sendReq,userId]\n  // }, [userId]);\n\n  // // const loadedQuestions = DUMMY_QUESTIONS.filter(question => question.createdBy === userId);\n\n  var QuestionDeletedHandler = function QuestionDeletedHandler(deletedQuestionId) {\n    setLoadedQuestions(function (prevQuestions) {\n      return prevQuestions.filter(function (question) {\n        return question.id !== deletedQuestionId;\n      });\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ErrorModel, {\n      error: error,\n      onClear: errorHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, _this), !isLoading && loadedQuestions && /*#__PURE__*/_jsxDEV(QuestionList, {\n      items: loadedQuestions,\n      onDeleteQuestion: QuestionDeletedHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 42\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, _this);\n};\n_s(UserQuestion, \"g3ktPGo/+jNBg4luHPjji3GaNDw=\", false, function () {\n  return [useParams];\n});\n_c = UserQuestion;\nexport default UserQuestion;\nvar _c;\n$RefreshReg$(_c, \"UserQuestion\");","map":{"version":3,"names":["React","useState","useEffect","QuestionList","useParams","ErrorModel","axios","jsxDEV","_jsxDEV","UserQuestion","_s","userId","_useState","_useState2","_slicedToArray","loadedQuestions","setLoadedQuestions","_useState3","_useState4","error","setError","_useState5","_useState6","isLoading","setIsLoading","sendReq","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","resData","wrap","_callee$","_context","prev","next","get","concat","sent","data","status","Error","message","questions","t0","stop","apply","arguments","errorHandler","QuestionDeletedHandler","deletedQuestionId","prevQuestions","filter","question","id","Fragment","children","onClear","fileName","_jsxFileName","lineNumber","columnNumber","_this","items","onDeleteQuestion","_c","$RefreshReg$"],"sources":["D:/atos/Task/ExamFrontEnd/src/questions/pages/UserQuestion.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport QuestionList from '../components/QuestionList';\r\nimport { useParams } from 'react-router-dom';\r\nimport ErrorModel from '../../Model/ErorrModel';\r\nimport axios from \"axios\";\r\n\r\n// const DUMMY_QUESTIONS = [\r\n//   {\r\n//     id: 'p1',\r\n//     name: 'this is name for first question',\r\n//     category: 'this is category',\r\n//     subCategory: 'this is subcaegory',\r\n//     mark: 'this is the mark',\r\n//     expextedTime: \"\",\r\n//     correctAnswers: [1, 2, 3, 4],  //array of ids\r\n//     createdBy: \"u1\",\r\n//     createdAt: \"\",\r\n//     answers: [{\r\n//       id: 1,\r\n//       name: \"name of answer\",\r\n//       description: \"this is desc\"\r\n//     }, {\r\n//       id: 2,\r\n//       name: \"name of answer2\",\r\n//       description: \"this is desc2\"\r\n//     }],\r\n//   },\r\n//   {\r\n//     id: 'p2',\r\n//     name: 'Empire State Building',\r\n//     category: 'One of the most famous sky scrapers in the world!',\r\n//     subCategory: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/NYC_Empire_State_Building.jpg/640px-NYC_Empire_State_Building.jpg',\r\n//     mark: '20 W 34th St, New York, NY 10001',\r\n//     expextedTime: \"\",\r\n//     correctAnswers: [],\r\n//     createdBy: \"u2\",\r\n//     createdAt: \"\",\r\n//     answers: {\r\n//       id: 40.7484405,\r\n//       name: -73.9878584,\r\n//       description: \"\"\r\n//     },\r\n//   }\r\n// ];\r\n\r\nconst UserQuestion = () => {\r\n  // const [error, setError] = useState();\r\n  const userId = useParams().userId;\r\n  // console.log(\"hello world\");\r\n\r\n  const [loadedQuestions, setLoadedQuestions] = useState();\r\n  const [error, setError] = useState();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const sendReq = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const res = await axios.get(`http://localhost:5000/api/questions/user/${userId}`);\r\n\r\n        const resData = await res.data;\r\n        \r\n        if (res.status !== 200) {\r\n          throw new Error(resData.message);\r\n        }\r\n        setLoadedQuestions(resData.questions);\r\n        // console.log(loadedQuestions)\r\n\r\n        // console.log(res);\r\n      }\r\n      catch (err) {\r\n\r\n        setError(err.message);\r\n      }\r\n      setIsLoading(false);\r\n    };\r\n    sendReq();\r\n  }, [userId]);\r\n\r\n  const errorHandler = () => {\r\n    setError(null);\r\n  }\r\n  // useEffect(() => {\r\n\r\n  //   const fetchQuestions = async () => {\r\n  //     try {\r\n  //       const responseData = await axios.get(\r\n  //         `http://localhost:5000/api/questions/user/${userId}`,\r\n  //       );\r\n  //       console.log(responseData);\r\n  //       setLoadedQuestions(responseData.questions);\r\n  //     } catch (err) {\r\n  //       // setError(err.message);\r\n  //     }\r\n  //   };\r\n  //   fetchQuestions();\r\n  //   //[sendReq,userId]\r\n  // }, [userId]);\r\n\r\n  // // const loadedQuestions = DUMMY_QUESTIONS.filter(question => question.createdBy === userId);\r\n\r\n  const QuestionDeletedHandler = deletedQuestionId => {\r\n    setLoadedQuestions(prevQuestions =>\r\n      prevQuestions.filter(question => question.id !== deletedQuestionId)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModel error={error} onClear={errorHandler} />\r\n      \r\n      {/* {console.log(loadedQuestions)} */}\r\n      {!isLoading && loadedQuestions && (<QuestionList items={loadedQuestions} onDeleteQuestion={QuestionDeletedHandler}/>)}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default UserQuestion;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}